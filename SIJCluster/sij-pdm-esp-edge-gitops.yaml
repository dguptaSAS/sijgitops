apiVersion: v1
kind: Pod
metadata:
  name: sij-pdm-esp-edge
  namespace: azure-iot-operations
spec:
  containers:
  - env:
    - name: ESPENV_meta_meteringcontext
      value: eventStreamProcessing/v1
    - name: ESPENV_meta_meteringhost
      value: http://sas-event-stream-processing-metering-app
    - name: ESPENV_meta_meteringport
      value: "80"
    - name: ESPENV_server_store-location
      value: /mnt/data
    - name: ESP_MEM_LIMIT_MIB
      value: "2048"
    - name: MAS_M2PATH
      value: /opt/sas/viya/home/SASFoundation/misc/embscoreeng/mas2py.py
    - name: MAS_PYPATH
      value: /usr/bin/python3
    - name: DFESP_CONFIG
      value: /mnt/data/config
    image: acrai6ikmo456nc2.azurecr.io/predictivemaintenance_jumpstart_edge-x86_64:latest
    imagePullPolicy: IfNotPresent
    name: sij-pdm-esp-edge
    resources:
      limits:
        cpu: "1"
        memory: 1Gi
      requests:
        cpu: "1"
        memory: 1Gi
    securityContext:
      allowPrivilegeEscalation: false
      readOnlyRootFilesystem: true
      runAsGroup: 1001
      runAsNonRoot: true
      runAsUser: 1001
    terminationMessagePath: /dev/termination-log
    terminationMessagePolicy: File
    volumeMounts:
    - mountPath: /mnt/data
      name: data
  dnsPolicy: ClusterFirst
  enableServiceLinks: true
  imagePullSecrets:
  - name: acrdgiotjumpstart-secret
  preemptionPolicy: PreemptLowerPriority
  priority: 0
  restartPolicy: Always
  schedulerName: default-scheduler
  securityContext:
    seccompProfile:
      type: RuntimeDefault
  volumes:
  - name: data
    persistentVolumeClaim:
      claimName: esp-projects

